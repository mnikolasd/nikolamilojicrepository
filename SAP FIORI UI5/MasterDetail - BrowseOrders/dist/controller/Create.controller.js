sap.ui.define(["./BaseController","sap/m/MessageToast"],function(e,t){"use strict";return e.extend("opensap.orders.controller.Create",{onInit:function(){this._oMessageManager=sap.ui.getCore().getMessageManager();this._oMessageManager.registerObject(this.getView(),true);this.setModel(this._oMessageManager.getMessageModel(),"message");this.getRouter().getRoute("create").attachPatternMatched(this._onCreateMatched,this)},_onCreateMatched:function(e){var t=e.getParameter("arguments").objectId;this.oContext=this.getModel().createEntry("/SalesOrderLineItemSet",{properties:{SalesOrderID:t,ProductID:"",Note:"",Quantity:"1",DeliveryDate:new Date},success:this._onCreateSuccess.bind(this)});this.getView().setBindingContext(this.oContext);this._oMessageManager.removeAllMessages();var s=new Date;s.setHours(0,0,0,0);this.byId("deliveryDate").getBinding("value").getType().setConstraints({minimum:s});this.getModel("appView").setProperty("/layout","ThreeColumnsMidExpanded")},_onCreateSuccess:function(e){var s=this.getResourceBundle().getText("newItemCreated",[e.ProductID]);t.show(s,{closeOnBrowserNavigation:false});this.getRouter().navTo("Info",{objectId:e.SalesOrderID,itemPosition:e.ItemPosition},true)},onCreate:function(){this.getModel().submitChanges()},onCancel:function(){var e=this.getView().getBindingContext().getProperty("SalesOrderID");this.getModel().deleteCreatedEntry(this.oContext);this.getRouter().navTo("object",{objectId:e},true)},onNameChange:function(){this._oMessageManager.getMessageModel().getData().forEach(function(e){if(e.code){this._oMessageManager.removeMessages(e)}}.bind(this))},onOpenMessages:function(e){this.byId("messages").openBy(e.getSource())}})});